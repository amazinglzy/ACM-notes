# Summay
## 1001 Big binary tree
[题目链接](http://acm.hdu.edu.cn/showproblem.php?pid=6161)
**题目大意**
$n$ 表示完全二叉树的结点数，结点 $i$ 的权值为 $i$，且 $i$ 号 结点的父亲为 $ \lfloor \frac {i} {2} \rfloor $，路径的权值为这条路径的所以结点的权值和，现有两种操作。
1. 修改结点的权值；
2. 查询通过结点 $v$ 的路径的最大的权值；

**限制条件**
$1 \leq n \leq 10^8$
$1 \leq m \leq 10^5$

**思路**
一共有 $10^8$ 个点；
$i$ 号结点的权值为  $i$ ；
有 $10^5$ 个点的权值有修改；
没有修改的情况下，对于第二种查询，答案可能是开始结点和终止结点分别在该结点两棵子树的路径，也可以是一个在该子树下，另一个不是，这个答案包括两部分，一部分是以这棵子树下的点为起点，以这个点为终点的的最大权值记为 $f(v)$ 另一部分就是路径的另外最长的一部分，是它的祖先结点 $u$ 的 $f(u)$，再加上 $u$ 到 $v$ 的路径的权值和，最多有 $O(logN)$ 个祖先结点；
但是，由于结点数过多，不能把全部的结点的 $f(v)$ 的求出来；考虑编号是是BFS序，所以对于一个结点作为起点来说，另一个在其子树下的终点深度越大权值和越大，所以选最深且最右的结点作为终点；这个结点要么是最后一个结点，要么是这个结点向右子树走到不能走为止的结点；
考虑修改，结果导致按以上方法，终点的选取不是最优的；有 $10^8 - 10^5 \cdot log(10^8) $ 个结点的选取可以按照之前的方案来选，有 $10^5 \cdot log(10^8) = 2.8 \cdot 10 ^ 6$ 个点，需要暴力DP算结果；
考虑一次修改，将受影响的所以点用一个 map 存好，复杂度是 $O(log^2N)$ ；考虑一次查询，询问 $O(logN)$ 个结点，询问复杂度为 $O(logN)$ ，所以部的复杂度为 $O(Mlog^2N)$


----------

## 1006 Senior Pan
[题目链接](http://acm.hdu.edu.cn/showproblem.php?pid=6166)
**题目大意**
给定一个有向图，以及大小为 $k$ 的集合，求其中两点的之间的距离的最小值。

**限制条件**
$1 \leq n, m \leq 1e5$
$1 \leq k \leq n$

**思路**
用spfa可以求出一个集合到其它点的距离，所以只要找到一个对这个大小为 $k$ 的集合的划分，将起点和终点分成两个不同的集合，这样求出来的答案就是最后的答案。
因为起点和终点是不一样的，所以枚举点标号的位，根据这个位数，将这个大小为 $k$ 的集合分成两个集合，求一次最短路，将所有的位枚举完的后，一定存在一个位将起点和终点分成两个集合，这样求出来的答案一定是正确答案。

----------

## 1009 Senior PanⅡ
[题目链接](http://acm.hdu.edu.cn/showproblem.php?pid=6169)
**题目大意**
求区间 $[l, r]$ 中最小的约数为 $k$ 个数的和。

**限制条件**
$1 \leq l \leq r \leq 10^{11}$
$1 \leq k \leq 10^{11}$

**思路**
转换成求区间 $[1, l]$ 的值。
如果 $k$ 是合数，那么答案是 $0$。
对于大于 $\sqrt{l}$ 的 $k$，如果 $k$ 小于 $l$，则答案就是 $k$，否则答案是 $0$。
这样 $k$ 的范围就限制在 $3.2e5$ 内的素数了。

考虑 $f(l, j)$ 表示区间 $[1, l]$ 用前 $j$ 个素数去筛，剩下的数的和。可以发现 $f(l, j) = f(l, j-1) - prime[k] \cdot f(\frac {l}{prime[k]}, j-1)$

>**证明** $f(l, j)$ 是由 $f(l, j-1)$ 减去包括因子 $prime[k]$ 的数且不包含因子 $prime[1...j-1]$，因为这些数一定包括因子 $prime[k]$，用 $prime[k]$ 除这些数后，这些数满足条件：
1. 在 $[1, \frac {l} {prime[k]} ]$ 的范围内
2. 不包括因子 $prime[1...j-1]$
所以这些数的和为$f(\frac{1}{prime[k]}, j-1)$。

因为 $3.2e5$ 内的素数仍然很多，所以需要记忆化一部分常用的 $(l, j)$ 的答案就可以在题目要的限制条下求解出答案。
